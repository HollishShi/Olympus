define("utils/ObjectUtil",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function extendObject(target){var sources=[];for(var _i=1;_i<arguments.length;_i++){sources[_i-1]=arguments[_i]}sources.forEach(function(source){if(!source)return;for(var propName in source){if(source.hasOwnProperty(propName)){target[propName]=source[propName]}}});return target}exports.extendObject=extendObject;function cloneObject(target,deep){if(deep===void 0){deep=false}if(target==null)return null;var newObject={};for(var key in target){var value=target[key];if(deep&&typeof value=="object"){value=cloneObject(value,true)}newObject[key]=value}return newObject}exports.cloneObject=cloneObject;function getGUID(){var s=[];var hexDigits="0123456789abcdef";for(var i=0;i<36;i++){s[i]=hexDigits.substr(Math.floor(Math.random()*16),1)}s[14]="4";s[19]=hexDigits.substr(parseInt(s[19])&3|8,1);s[8]=s[13]=s[18]=s[23]="-";return s.join("")}exports.getGUID=getGUID;var _getAutoIncIdMap={};function getAutoIncId(type){var index=_getAutoIncIdMap[type]||0;_getAutoIncIdMap[type]=index++;return type+"-"+index}exports.getAutoIncId=getAutoIncId;function isEmpty(obj){var result=true;for(var key in obj){result=false;break}return result}exports.isEmpty=isEmpty;function trimData(data){for(var key in data){if(data[key]==null){delete data[key]}}return data}exports.trimData=trimData;exports.extendsClass=function(){var extendStatics=Object["setPrototypeOf"]||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var hash=0;var hashTypes=["object","function"];function getObjectHash(target){if(target==null)return"__object_hash_0__";var key="__object_hash__";var value;if(target.hasOwnProperty(key))value=target[key];if(value)return value;var type=typeof target;if(hashTypes.indexOf(type)<0)return type+":"+target;var value="__object_hash_"+ ++hash+"__";Object.defineProperty(target,key,{configurable:true,enumerable:false,writable:false,value:value});return value}exports.getObjectHash=getObjectHash;function getObjectHashs(){var targets=[];for(var _i=0;_i<arguments.length;_i++){targets[_i]=arguments[_i]}var values=targets.map(function(target){return getObjectHash(target)});return values.join("|")}exports.getObjectHashs=getObjectHashs});define("utils/URLUtil",["require","exports","utils/ObjectUtil"],function(require,exports,ObjectUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function trimURL(url){url=url.replace(/([^:\/])(\/)+/g,"$1/");if(url.charAt(0)=="/")url=url.substr(1);var index;while((index=url.indexOf("/./"))>=0){url=url.replace("/./","/")}var reg=/\/[^\/\.]+?\/\.\.\//;while(reg.test(url)){url=url.replace(reg,"/")}return url}exports.trimURL=trimURL;function isAbsolutePath(url){if(url==null)return false;return url.indexOf("://")>=0}exports.isAbsolutePath=isAbsolutePath;function validateProtocol(url){if(url==null)return null;var index=url.indexOf("://");if(index<0)return url;var protocol=url.substring(0,index);if(protocol=="http"||protocol=="https"){return window.location.protocol+url.substr(index+1)}if(protocol=="ws"||protocol=="wss"){if(window.location.protocol=="https:")protocol="wss";else protocol="ws";return protocol+url.substr(index)}return url}exports.validateProtocol=validateProtocol;function wrapHost(url,host,forced){if(forced===void 0){forced=false}host=host||window.location.origin;var re=/^(?:[^\/]+):\/{2,}(?:[^\/]+)\//;var arr=url.match(re);if(arr&&arr.length>0){if(forced){url=url.substr(arr[0].length);url=host+"/"+url}}else{url=host+"/"+url}url=validateProtocol(url);url=trimURL(url);return url}exports.wrapHost=wrapHost;function wrapAbsolutePath(relativePath,host){var curPath=getPath(window.location.href);var url=trimURL(curPath+"/"+relativePath);if(host!=null){url=wrapHost(url,host,true)}return url}exports.wrapAbsolutePath=wrapAbsolutePath;function getHostAndPathname(url){if(url==null)throw new Error("url不能为空");url=url.split("#")[0].split("?")[0];url=trimURL(url);return url}exports.getHostAndPathname=getHostAndPathname;function getPath(url){url=getHostAndPathname(url);var urlArr=url.split("/");urlArr.pop();return urlArr.join("/")+"/"}exports.getPath=getPath;function getName(url){url=url.split("#")[0].split("?")[0];var urlArr=url.split("/");var fileName=urlArr[urlArr.length-1];return fileName}exports.getName=getName;function parseUrl(url){var regExp=/(([^:]+:)\/\/(([^:\/\?#]+)(:(\d+))?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/;var match=regExp.exec(url);if(match){return{href:match[0]||"",origin:match[1]||"",protocol:match[2]||"",host:match[3]||"",hostname:match[4]||"",port:match[6]||"",pathname:match[7]||"",search:match[8]||"",hash:(match[9]=="#"?"":match[9])||""}}else{throw new Error("传入parseUrl方法的参数不是一个完整的URL："+url)}}exports.parseUrl=parseUrl;function getQueryParams(url){var index=url.indexOf("#");if(index>=0){url=url.substring(0,index)}index=url.indexOf("?");if(index<0)return{};var queryString=url.substring(index+1);var params={};var kvs=queryString.split("&");kvs.forEach(function(kv){var pair=kv.split("=",2);if(pair.length!==2||!pair[0]){console.log("[URLUtil] invalid query params: "+kv);return}var name=decodeURIComponent(pair[0]);var value=decodeURIComponent(pair[1]);params[name]=value});return params}exports.getQueryParams=getQueryParams;function joinQueryParams(url,params){if(url==null)throw new Error("url不能为空");var oriParams=getQueryParams(url);var targetParams=ObjectUtil_1.extendObject(oriParams,params);var hash=parseUrl(url).hash;url=getHostAndPathname(url);var isFirst=true;for(var key in targetParams){if(isFirst){url+="?"+encodeURIComponent(key)+"="+encodeURIComponent(targetParams[key]);isFirst=false}else{url+="&"+encodeURIComponent(key)+"="+encodeURIComponent(targetParams[key])}}url+=hash;return url}exports.joinQueryParams=joinQueryParams;function joinHashParams(url,params){if(url==null)throw new Error("url不能为空");var hash=parseUrl(url).hash;if(hash==null||hash=="")return url;for(var key in params){var value=params[key];if(value&&typeof value!="string")value=value.toString();hash+=(hash.indexOf("?")<0?"?":"&")+encodeURIComponent(key)+"="+encodeURIComponent(value)}return url.split("#")[0]+hash}exports.joinHashParams=joinHashParams});define("utils/VersionUtil",["require","exports","utils/URLUtil"],function(require,exports,URLUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var InitStatus;(function(InitStatus){InitStatus[InitStatus["UNINITIALIZED"]=0]="UNINITIALIZED";InitStatus[InitStatus["INITIALIZING"]=1]="INITIALIZING";InitStatus[InitStatus["INITIALIZED"]=2]="INITIALIZED"})(InitStatus||(InitStatus={}));var VersionUtil=function(){function VersionUtil(){}VersionUtil.initialize=function(handler){var _this=this;switch(VersionUtil._initStatus){case InitStatus.INITIALIZED:handler&&handler();break;case InitStatus.INITIALIZING:if(VersionUtil._handlerList.indexOf(handler)<0)VersionUtil._handlerList.push(handler);break;case InitStatus.UNINITIALIZED:VersionUtil._initStatus=InitStatus.INITIALIZING;if(VersionUtil._handlerList.indexOf(handler)<0)VersionUtil._handlerList.push(handler);var request=null;if(window["XMLHttpRequest"]){request=new XMLHttpRequest}else if(window["ActiveXObject"]){request=new ActiveXObject("Microsoft.XMLHTTP")}request.onreadystatechange=function(evt){var request=evt.target;if(request.readyState==4){if(request.status==200){var fileName=request["fileName"];var responseText=request.responseText;var lines=responseText.split("\n");for(var i in lines){var line=lines[i];var arr=line.split("  ");if(arr.length==2){var key=arr[1].substr(2);var value=arr[0];_this._hashDict[key]=value}}}VersionUtil._initStatus=InitStatus.INITIALIZED;for(var j=0,len=VersionUtil._handlerList.length;j<len;j++){var handler=VersionUtil._handlerList.shift();handler&&handler()}}};request.open("GET","version.cfg?v="+(new Date).getTime(),true);request.send();break}};VersionUtil.getHash=function(url){url=URLUtil_1.trimURL(url);var result=null;for(var path in this._hashDict){if(url.indexOf(path)>=0){result=this._hashDict[path];break}}return result};VersionUtil.wrapHashUrl=function(url){var hash=this.getHash(url);if(hash!=null){url=this.joinVersion(url,hash)}return url};VersionUtil.joinVersion=function(url,version){if(version==null)return url;version=version.replace(/[^0-9a-z]+/gi,"");var reg=/([a-zA-Z]+:\/+[^\/\?#]+\/[^\?#]+)\.([^\?]+)(\?.+)?/;var result=reg.exec(url);if(result!=null){url=result[1]+"-r_"+version+"."+result[2]+(result[3]||"")}return url};VersionUtil.removeVersion=function(url){url=url.replace(/\-r_[a-z0-9]+\./gi,".");return url};VersionUtil._initStatus=InitStatus.UNINITIALIZED;VersionUtil._hashDict={};VersionUtil._handlerList=[];return VersionUtil}();exports.default=VersionUtil});define("preload/Preloader",["require","exports","utils/URLUtil","utils/VersionUtil"],function(require,exports,URLUtil_2,VersionUtil_1){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function preload(jsFiles,host,callback){if(!host)host=window.location.origin;VersionUtil_1.default.initialize(preloadOne);function preloadOne(){if(jsFiles.length<=0){callback&&callback()}else{var url=jsFiles.shift();if(!URLUtil_2.isAbsolutePath(url))url=URLUtil_2.wrapAbsolutePath(url,host);url=VersionUtil_1.default.wrapHashUrl(url);var xhr=window["XMLHttpRequest"]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xhr.responseType="text";xhr.onreadystatechange=onReadyStateChange;xhr.open("GET",url,true);xhr.send(null)}}function onReadyStateChange(evt){var xhr=evt.target;if(xhr.readyState==4&&xhr.status==200){var script=document.createElement("script");script.innerHTML=xhr.responseText;document.body.appendChild(script);preloadOne()}}}exports.default=preload});