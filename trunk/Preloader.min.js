var olympus;(function(r){function o(){if(window.location.origin)return window.location.origin;return window.location.protocol+"//"+window.location.host}r.getCurOrigin=o;function a(r){r=r.replace(/([^:/])(\/)+/g,"$1/");if(r.charAt(0)=="/")r=r.substr(1);var t;while((t=r.indexOf("/./"))>=0){r=r.replace("/./","/")}var n=/\/[^\/\.]+?\/\.\.\//;while(n.test(r)){r=r.replace(n,"/")}return r}r.trimURL=a;function n(r){if(r==null)throw new Error("url不能为空");r=r.split("#")[0].split("?")[0];r=a(r);return r}r.getHostAndPathname=n;function i(r){r=n(r);var t=r.split("/");t.pop();return t.join("/")+"/"}r.getPath=i;function _(r){if(r==null)return false;return r.indexOf("://")>=0}r.isAbsolutePath=_;function s(r){if(r==null)return null;var t=r.indexOf("://");if(t<0)return r;var n=r.substring(0,t);if(n=="http"||n=="https"){return window.location.protocol+r.substr(t+1)}if(n=="ws"||n=="wss"){if(window.location.protocol=="https:")n="wss";else n="ws";return n+r.substr(t)}return r}r.validateProtocol=s;function u(r,t,n){if(n===void 0){n=false}t=t||o();var e=/^(?:[^\/]+):\/{2,}(?:[^\/]+)\//;var i=r.match(e);if(i&&i.length>0){if(n){r=r.substr(i[0].length);r=t+"/"+r}}else{r=t+"/"+r}r=s(r);r=a(r);return r}r.wrapHost=u;function m(r,t){var n=i(window.location.href);var e=a(n+"/"+r);if(t!=null){e=u(e,t,true)}return e}r.wrapAbsolutePath=m;var t=function(){function r(){this._hashDict={}}r.prototype.initialize=function(n,t,e){var l=this;if(window["__Olympus_Version_hashDict__"]){this._hashDict=window["__Olympus_Version_hashDict__"];n()}else{var i=null;if(window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0){i=new window["XDomainRequest"]}if(window["XMLHttpRequest"]){i=new XMLHttpRequest}else if(window["ActiveXObject"]){i=new ActiveXObject("Microsoft.XMLHTTP")}i.onload=function(r){var t=Math.floor(i.status*.01);switch(t){case 2:case 3:o(r);n();break;case 4:case 5:i.onerror(new ErrorEvent(i.status+"",{message:i.statusText}));break}};var r;if(e){i.onerror=function(){var r=m("version.cfg?v="+e,t);i.abort();i.onerror=n;i.open("GET",r,true);i.send()};r=m("version.cfg",t);r=this.joinVersion(r,e)}else{i.onerror=n;r=m("version.cfg?v="+Date.now(),t)}i.open("GET",r,true);i.send()}function o(r){var t=r.target;var n=t.responseText;var e=n.split("\n");for(var i in e){var o=e[i];var a=o.split("  ");if(a.length==2){var s=a[1].substr(2);var u=a[0];l._hashDict[s]=u}}window["__Olympus_Version_hashDict__"]=l._hashDict}};r.prototype.getHash=function(r){r=a(r);var t=null;for(var n in this._hashDict){if(r.indexOf(n)>=0){t=this._hashDict[n];break}}return t};r.prototype.wrapHashUrl=function(r){var t=this.getHash(r);if(t!=null){r=this.joinVersion(r,t)}return r};r.prototype.joinVersion=function(r,t){if(t==null)return r;t=t.replace(/[^0-9a-z]+/gi,"");var n=/([a-zA-Z]+:\/+[^\/\?#]+\/[^\?#]+)\.([^\?]+)(\?.+)?/;var e=n.exec(r);if(e!=null){r=e[1]+"-r_"+t+"."+e[2]+(e[3]||"")}return r};r.prototype.removeVersion=function(r){r=r.replace(/\-r_[a-z0-9]+\./gi,".");return r};return r}();var O=new t;function e(r,t,n,e,i){if(e===void 0){e=true}O.initialize(function(){l(r,t||o(),function(r){if(r)throw r;else n&&n()},e)},t,i)}r.preload=e;function l(r,t,n,e){if(!r){n();return}r=r.concat();var i=r.length;var o=0;var a=false;var s=[];for(var u in r){var l=r[u];if(typeof l==="string"){r[u]=l={url:l,mode:T.AUTO}}var f=l.url;if(!_(f))f=m(f,t);f=O.wrapHashUrl(f);var c=document.createElement("script");c.type="text/javascript";s.push(c);if(l.mode===T.JSONP||l.mode===T.AUTO&&!_(l.url)){var v=window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0?new window["XDomainRequest"]:window["XMLHttpRequest"]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");v["index"]=u;v.open("GET",f,true);v.responseType="text";v.onload=h;v.onerror=h;v.send(null);o++}else{c.onload=d;c.onerror=g;c.src=f}}var w=0;p();function p(){if(o===0){for(var r=w,t=s.length;r<t;){var n=s[r];document.body.appendChild(n);w=++r;if(e&&n.src)break}}}function h(r){if(r instanceof ErrorEvent){g()}else{var t=r.target;var n=t["index"];var e=s[n];e.innerHTML=t.responseText;o--;d()}}function d(){p();if(!a&&--i===0)n()}function g(){if(!a){a=true;n(new Error("JS加载失败"))}}}var T;(function(r){r[r["AUTO"]=0]="AUTO";r[r["JSONP"]=1]="JSONP";r[r["TAG"]=2]="TAG"})(T=r.JSLoadMode||(r.JSLoadMode={}))})(olympus||(olympus={}));