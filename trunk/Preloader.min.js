var olympus;(function(n){function t(){if(window.location.origin)return window.location.origin;return window.location.protocol+"//"+window.location.host}function e(n){n=n.replace(/([^:/])(\/)+/g,"$1/");if(n.charAt(0)=="/")n=n.substr(1);var t;while((t=n.indexOf("/./"))>=0){n=n.replace("/./","/")}var e=/\/[^\/\.]+?\/\.\.\//;while(e.test(n)){n=n.replace(e,"/")}return n}function i(n){if(n==null)throw new Error("url不能为空");n=n.split("#")[0].split("?")[0];n=e(n);return n}function r(n){n=i(n);var t=n.split("/");t.pop();return t.join("/")+"/"}function o(n){if(n==null)return false;return n.indexOf("://")>=0}function s(n){if(n==null)return null;var t=n.indexOf("://");if(t<0)return n;var e=n.substring(0,t);if(e=="http"||e=="https"){return window.location.protocol+n.substr(t+1)}if(e=="ws"||e=="wss"){if(window.location.protocol=="https:")e="wss";else e="ws";return e+n.substr(t)}return n}function a(n,i,r){if(r===void 0){r=false}i=i||t();var o=/^(?:[^\/]+):\/{2,}(?:[^\/]+)\//;var a=n.match(o);if(a&&a.length>0){if(r){n=n.substr(a[0].length);n=i+"/"+n}}else{n=i+"/"+n}n=s(n);n=e(n);return n}function u(n,t){var i=r(window.location.href);var o=e(i+"/"+n);if(t!=null){o=a(o,t,true)}return o}var l=function(){function n(){this._hashDict={}}n.prototype.initialize=function(n){var t=this;if(window["__Olympus_Version_hashDict__"]){this._hashDict=window["__Olympus_Version_hashDict__"];n()}else{var e=null;if(window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0){e=new window["XDomainRequest"]}if(window["XMLHttpRequest"]){e=new XMLHttpRequest}else if(window["ActiveXObject"]){e=new ActiveXObject("Microsoft.XMLHTTP")}e.onload=function(t){i(t);n()};e.onerror=n;e.open("GET","version.cfg?v="+(new Date).getTime(),true);e.send()}function i(n){var e=n.target;var i=e.responseText;var r=i.split("\n");for(var o in r){var s=r[o];var a=s.split("  ");if(a.length==2){var u=a[1].substr(2);var l=a[0];t._hashDict[u]=l}}window["__Olympus_Version_hashDict__"]=t._hashDict}};n.prototype.getHash=function(n){n=e(n);var t=null;for(var i in this._hashDict){if(n.indexOf(i)>=0){t=this._hashDict[i];break}}return t};n.prototype.wrapHashUrl=function(n){var t=this.getHash(n);if(t!=null){n=this.joinVersion(n,t)}return n};n.prototype.joinVersion=function(n,t){if(t==null)return n;t=t.replace(/[^0-9a-z]+/gi,"");var e=/([a-zA-Z]+:\/+[^\/\?#]+\/[^\?#]+)\.([^\?]+)(\?.+)?/;var i=e.exec(n);if(i!=null){n=i[1]+"-r_"+t+"."+i[2]+(i[3]||"")}return n};n.prototype.removeVersion=function(n){n=n.replace(/\-r_[a-z0-9]+\./gi,".");return n};return n}();var c=new l;function f(n,e,i){if(!e)e=t();c.initialize(r);function r(){if(n.length<=0){i&&i()}else{var t=n.shift();if(!o(t))t=u(t,e);t=c.wrapHashUrl(t);var r=window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0?new window["XDomainRequest"]:window["XMLHttpRequest"]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.open("GET",t,true);r.responseType="text";r.onload=s;r.send(null)}}function s(n){var t=n.target;var e=document.createElement("script");e.innerHTML=t.responseText;document.body.appendChild(e);r()}}n.preload=f})(olympus||(olympus={}));