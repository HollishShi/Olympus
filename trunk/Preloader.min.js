var olympus;(function(n){function r(){if(window.location.origin)return window.location.origin;return window.location.protocol+"//"+window.location.host}function t(n){n=n.replace(/([^:/])(\/)+/g,"$1/");if(n.charAt(0)=="/")n=n.substr(1);var r;while((r=n.indexOf("/./"))>=0){n=n.replace("/./","/")}var t=/\/[^\/\.]+?\/\.\.\//;while(t.test(n)){n=n.replace(t,"/")}return n}function e(n){if(n==null)throw new Error("url不能为空");n=n.split("#")[0].split("?")[0];n=t(n);return n}function i(n){n=e(n);var r=n.split("/");r.pop();return r.join("/")+"/"}function o(n){if(n==null)return false;return n.indexOf("://")>=0}function a(n){if(n==null)return null;var r=n.indexOf("://");if(r<0)return n;var t=n.substring(0,r);if(t=="http"||t=="https"){return window.location.protocol+n.substr(r+1)}if(t=="ws"||t=="wss"){if(window.location.protocol=="https:")t="wss";else t="ws";return t+n.substr(r)}return n}function s(n,e,i){if(i===void 0){i=false}e=e||r();var o=/^(?:[^\/]+):\/{2,}(?:[^\/]+)\//;var s=n.match(o);if(s&&s.length>0){if(i){n=n.substr(s[0].length);n=e+"/"+n}}else{n=e+"/"+n}n=a(n);n=t(n);return n}function u(n,r){var e=i(window.location.href);var o=t(e+"/"+n);if(r!=null){o=s(o,r,true)}return o}var l=function(){function n(){this._hashDict={}}n.prototype.initialize=function(n){var r=this;if(window["__Olympus_Version_hashDict__"]){this._hashDict=window["__Olympus_Version_hashDict__"];n()}else{var t=null;if(window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0){t=new window["XDomainRequest"]}if(window["XMLHttpRequest"]){t=new XMLHttpRequest}else if(window["ActiveXObject"]){t=new ActiveXObject("Microsoft.XMLHTTP")}t.onload=function(r){e(r);n()};t.onerror=n;t.open("GET","version.cfg?v="+(new Date).getTime(),true);t.send()}function e(n){var t=n.target;var e=t.responseText;var i=e.split("\n");for(var o in i){var a=i[o];var s=a.split("  ");if(s.length==2){var u=s[1].substr(2);var l=s[0];r._hashDict[u]=l}}window["__Olympus_Version_hashDict__"]=r._hashDict}};n.prototype.getHash=function(n){n=t(n);var r=null;for(var e in this._hashDict){if(n.indexOf(e)>=0){r=this._hashDict[e];break}}return r};n.prototype.wrapHashUrl=function(n){var r=this.getHash(n);if(r!=null){n=this.joinVersion(n,r)}return n};n.prototype.joinVersion=function(n,r){if(r==null)return n;r=r.replace(/[^0-9a-z]+/gi,"");var t=/([a-zA-Z]+:\/+[^\/\?#]+\/[^\?#]+)\.([^\?]+)(\?.+)?/;var e=t.exec(n);if(e!=null){n=e[1]+"-r_"+r+"."+e[2]+(e[3]||"")}return n};n.prototype.removeVersion=function(n){n=n.replace(/\-r_[a-z0-9]+\./gi,".");return n};return n}();var f=new l;function c(n,t,e){f.initialize(function(){p(n,t||r(),function(n){if(n)throw n;else e&&e()})})}n.preload=c;function p(n,r,t){if(!n){t();return}n=n.concat();var e=n.length;var i=false;var a=[];for(var s in n){var l=n[s];if(typeof l==="string"){n[s]=l={url:l,mode:v.AUTO}}var c=l.url;if(!o(c))c=u(c,r);c=f.wrapHashUrl(c);var p=document.createElement("script");p.type="text/javascript";a.push(p);if(l.mode===v.JSONP||l.mode===v.AUTO&&!o(l.url)){var w=window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0?new window["XDomainRequest"]:window["XMLHttpRequest"]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");w.open("GET",c,true);w.responseType="text";w.onload=h;w.onerror=h;w.send(null)}else{p.onload=d;p.onerror=_;p.src=c}}function h(r){if(r instanceof ErrorEvent){_()}else{var t=r.target;var e=-1;for(var i=0,o=n.length;i<o;i++){var s=n[i];if(s.url===c){e=i;break}}if(e>=0){var u=a[e];u.innerHTML=t.responseText}d()}}function d(){if(!i&&--e===0)g()}function _(){if(!i){i=true;t(new Error("JS加载失败"))}}function g(){for(var n=0,r=a;n<r.length;n++){var e=r[n];document.body.appendChild(e)}t()}}var v;(function(n){n[n["AUTO"]=0]="AUTO";n[n["JSONP"]=1]="JSONP";n[n["TAG"]=2]="TAG"})(v=n.JSLoadMode||(n.JSLoadMode={}))})(olympus||(olympus={}));