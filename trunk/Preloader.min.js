var olympus;(function(n){function o(){if(window.location.origin)return window.location.origin;return window.location.protocol+"//"+window.location.host}function a(n){n=n.replace(/([^:/])(\/)+/g,"$1/");if(n.charAt(0)=="/")n=n.substr(1);var t;while((t=n.indexOf("/./"))>=0){n=n.replace("/./","/")}var r=/\/[^\/\.]+?\/\.\.\//;while(r.test(n)){n=n.replace(r,"/")}return n}function r(n){if(n==null)throw new Error("url不能为空");n=n.split("#")[0].split("?")[0];n=a(n);return n}function i(n){n=r(n);var t=n.split("/");t.pop();return t.join("/")+"/"}function d(n){if(n==null)return false;return n.indexOf("://")>=0}function s(n){if(n==null)return null;var t=n.indexOf("://");if(t<0)return n;var r=n.substring(0,t);if(r=="http"||r=="https"){return window.location.protocol+n.substr(t+1)}if(r=="ws"||r=="wss"){if(window.location.protocol=="https:")r="wss";else r="ws";return r+n.substr(t)}return n}function u(n,t,r){if(r===void 0){r=false}t=t||o();var e=/^(?:[^\/]+):\/{2,}(?:[^\/]+)\//;var i=n.match(e);if(i&&i.length>0){if(r){n=n.substr(i[0].length);n=t+"/"+n}}else{n=t+"/"+n}n=s(n);n=a(n);return n}function _(n,t){var r=i(window.location.href);var e=a(r+"/"+n);if(t!=null){e=u(e,t,true)}return e}var t=function(){function n(){this._hashDict={}}n.prototype.initialize=function(t){var l=this;if(window["__Olympus_Version_hashDict__"]){this._hashDict=window["__Olympus_Version_hashDict__"];t()}else{var n=null;if(window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0){n=new window["XDomainRequest"]}if(window["XMLHttpRequest"]){n=new XMLHttpRequest}else if(window["ActiveXObject"]){n=new ActiveXObject("Microsoft.XMLHTTP")}n.onload=function(n){r(n);t()};n.onerror=t;n.open("GET","version.cfg?v="+(new Date).getTime(),true);n.send()}function r(n){var t=n.target;var r=t.responseText;var e=r.split("\n");for(var i in e){var o=e[i];var a=o.split("  ");if(a.length==2){var s=a[1].substr(2);var u=a[0];l._hashDict[s]=u}}window["__Olympus_Version_hashDict__"]=l._hashDict}};n.prototype.getHash=function(n){n=a(n);var t=null;for(var r in this._hashDict){if(n.indexOf(r)>=0){t=this._hashDict[r];break}}return t};n.prototype.wrapHashUrl=function(n){var t=this.getHash(n);if(t!=null){n=this.joinVersion(n,t)}return n};n.prototype.joinVersion=function(n,t){if(t==null)return n;t=t.replace(/[^0-9a-z]+/gi,"");var r=/([a-zA-Z]+:\/+[^\/\?#]+\/[^\?#]+)\.([^\?]+)(\?.+)?/;var e=r.exec(n);if(e!=null){n=e[1]+"-r_"+t+"."+e[2]+(e[3]||"")}return n};n.prototype.removeVersion=function(n){n=n.replace(/\-r_[a-z0-9]+\./gi,".");return n};return n}();var g=new t;function e(n,t,r){g.initialize(function(){l(n,t||o(),function(n){if(n)throw n;else r&&r()})})}n.preload=e;function l(n,t,r){if(!n){r();return}n=n.concat();var e=n.length;var i=0;var o=false;var a=[];for(var s in n){var u=n[s];if(typeof u==="string"){n[s]=u={url:u,mode:m.AUTO}}var l=u.url;if(!d(l))l=_(l,t);l=g.wrapHashUrl(l);var f=document.createElement("script");f.type="text/javascript";a.push(f);if(u.mode===m.JSONP||u.mode===m.AUTO&&!d(u.url)){var c=window["XDomainRequest"]&&navigator.userAgent.indexOf("MSIE 10.")<0?new window["XDomainRequest"]:window["XMLHttpRequest"]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c["index"]=s;c.open("GET",l,true);c.responseType="text";c.onload=w;c.onerror=w;c.send(null);i++}else{f.onload=v;f.onerror=h;f.src=l}}p();function p(){if(i===0){for(var n=0,t=a;n<t.length;n++){var r=t[n];document.body.appendChild(r)}}}function w(n){if(n instanceof ErrorEvent){h()}else{var t=n.target;var r=t["index"];var e=a[r];e.innerHTML=t.responseText;i--;p();v()}}function v(){if(!o&&--e===0)r()}function h(){if(!o){o=true;r(new Error("JS加载失败"))}}}var m;(function(n){n[n["AUTO"]=0]="AUTO";n[n["JSONP"]=1]="JSONP";n[n["TAG"]=2]="TAG"})(m=n.JSLoadMode||(n.JSLoadMode={}))})(olympus||(olympus={}));